FROM postgis/postgis:15-3.4-alpine

# Set environment variables
ENV POSTGRES_DB=geograph_layer
ENV POSTGRES_USER=postgres
ENV POSTGRES_PASSWORD=postgres

# Copy initialization script
COPY init-postgres.sh /docker-entrypoint-initdb.d/

# Make script executable and ensure proper line endings
RUN chmod +x /docker-entrypoint-initdb.d/init-postgres.sh && \
    sed -i 's/\r$//' /docker-entrypoint-initdb.d/init-postgres.sh
